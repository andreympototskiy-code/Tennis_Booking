#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ 24.09 –≤ —Å–∏—Å—Ç–µ–º—É –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
"""

import sys
import os
from datetime import datetime

# –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ –ø—É—Ç—å
sys.path.insert(0, '/root/tennis-monitor')

from smart_booking_system import SmartBookingSystem

def add_sept24_request():
    """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ 24.09"""
    print("üéæ –î–û–ë–ê–í–õ–ï–ù–ò–ï –ó–ê–ü–†–û–°–ê –ù–ê –ë–†–û–ù–ò–†–û–í–ê–ù–ò–ï 24.09")
    print("=" * 50)
    
    system = SmartBookingSystem()
    
    # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
    date = "2025-09-24"
    time_from = 20  # 20:00
    duration_hours = 2  # 2 —á–∞—Å–∞
    description = "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ä—Ç–∞"
    
    print(f"üìÖ –î–∞—Ç–∞: {date}")
    print(f"‚è∞ –í—Ä–µ–º—è: {time_from}:00-{(time_from + duration_hours) % 24}:00")
    print(f"üèüÔ∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {duration_hours} —á–∞—Å–∞")
    print(f"üìù –û–ø–∏—Å–∞–Ω–∏–µ: {description}")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–∞—Ç—ã
    print(f"\nüîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–∞—Ç—ã {date}...")
    
    if system.is_date_available(date):
        print(f"‚úÖ –î–∞—Ç–∞ {date} –¥–æ—Å—Ç—É–ø–Ω–∞!")
        print("ü§ñ –í—ã–ø–æ–ª–Ω—è–µ–º –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ...")
        
        # –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
        temp_request = {
            'id': 0,
            'date': date,
            'time_from': time_from,
            'duration_hours': duration_hours,
            'description': description,
            'status': 'pending',
            'created_at': datetime.now().isoformat(),
            'last_check': None,
            'attempts': 0
        }
        
        success, message = system.process_booking_request(temp_request)
        
        if success:
            print(f"üéâ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ: {message}")
        else:
            print(f"‚ùå –û—à–∏–±–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: {message}")
    else:
        print(f"‚è≥ –î–∞—Ç–∞ {date} –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ (–±–æ–ª—å—à–µ 7 –¥–Ω–µ–π)")
        print("üìù –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –≤ —Å–∏—Å—Ç–µ–º—É –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è...")
        
        request_id = system.add_booking_request(date, time_from, duration_hours, description)
        
        print(f"\n‚úÖ –ó–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!")
        print(f"üÜî ID –∑–∞–ø—Ä–æ—Å–∞: #{request_id}")
        print(f"üìã –°—Ç–∞—Ç—É—Å: –û—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ")
        print(f"üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞: –í–∫–ª—é—á–µ–Ω–∞")
        
        print(f"\nüìÖ –ü–õ–ê–ù –û–ë–†–ê–ë–û–¢–ö–ò:")
        print(f"  ‚Ä¢ –ó–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏")
        print(f"  ‚Ä¢ –ö–æ–≥–¥–∞ {date} —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ (—á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π), —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏")
        print(f"    –Ω–∞–π–¥–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã–π –∫–æ—Ä—Ç –≤ {time_from}:00 –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ")
        print(f"  ‚Ä¢ –í—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ")
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã
    print(f"\nüìã –í–°–ï –ó–ê–ü–†–û–°–´ –ù–ê –ë–†–û–ù–ò–†–û–í–ê–ù–ò–ï:")
    print("-" * 50)
    system.show_requests_status()

if __name__ == "__main__":
    add_sept24_request()
